# 遮罩，模糊和动画

遮罩，模糊和动画是日常开发中经常会用到的东西。这些技术可以帮助你添加柔软的边界，景深效果，且可以随时间变化进行更新。本章介绍一些这些技术在iOS中的解决方案。

### 用块在图像中进行绘制
第六章介绍了自定义PushDraw()和PushLayerDraw()方法，他们将Quartz绘图和Objective-C结合起来，用于图形状态的管理和透明层。代码7-1同样使用了这个想法，介绍了一个返回图像的新函数。它使用同样的绘图状态块类型来传递一系列绘图块内操作，将他们写入新的图像绘制上下文。
虽然我最初构建这个函数是为了创建蒙版图像（如代码7-2所示），但我发现在很多情况下都可以使用它。例如，在构建图像视图的上下文时，在构建合成子视图时，在构建颜色选择器时，等等，都可以使用。在本章中，代码7-1将作为一个支持的角色，为你将阅读到的许多认为提供一个很好的起点。

```
UIImage *DrawIntoImage(CGSize size, DrawingStateBlock block)
{
     UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);
     if(block) block();
     UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();
     return image;
}

```
### 简单的遮罩
如您在前些章所见到的，裁剪允许你在某个路径区域内部进行绘制。图7-1展示了一个简单的遮罩裁剪的例子。在本例中，仅路径的部分绘制到了图像上下文中。

<img src="./7-1.png" alt="图7-1" title="图6.2" width="700"/>

你可以使用Quartz或UIKit方法来实现这一效果。比如说，你也许使用CGContextClip（）来裁剪以处理上下文，或者使用addClip方法来处理UIBezierPath实例。我使用addClip（）来创建图7-1。
代码7-1展示了创建图片的代码。他创建了路径，实现了裁剪，然后在上下文中绘制出图像。
